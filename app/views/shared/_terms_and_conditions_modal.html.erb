<!-- Terms and Conditions Modal -->
<div data-controller="modal" data-modal-target="modal" class="fixed inset-0 z-50 hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
  <!-- Backdrop -->
  <div onclick="closeTermsModal()" class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>

  <!-- Modal container -->
  <div class="fixed inset-0 z-10 overflow-y-auto">
    <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
      <!-- Modal panel -->
      <div onclick="event.stopPropagation()" class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 w-full max-w-2xl">
        <!-- Header -->
        <div class="bg-white px-6 py-4 border-b border-gray-200">
          <div class="flex items-center justify-between">
            <h3 class="text-lg font-semibold text-gray-900" id="modal-title">
              Terms and Conditions
            </h3>
            <button type="button" onclick="closeTermsModal()" class="rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
              <span class="sr-only">Close</span>
              <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
        </div>

        <!-- Content - Fixed height with scroll -->
        <div class="bg-white px-6 py-4 max-h-96 overflow-y-auto">
          <div class="prose prose-sm max-w-none">
            <p class="text-sm text-gray-600 mb-4">
              <strong>Last updated:</strong> <%= Date.current.strftime("%B %d, %Y") %>
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">Welcome to Tablr</h4>
            <p class="text-sm text-gray-700 mb-4">
              By using Tablr's services, you agree to these terms and conditions. Please read them carefully before proceeding with your registration.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">1. Service Description</h4>
            <p class="text-sm text-gray-700 mb-4">
              Tablr provides restaurant review analysis and sentiment analysis services by processing publicly available review data from various platforms including Google Maps and other review sites.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">2. Subscription Plans and Data Limits</h4>
            <div class="text-sm text-gray-700 mb-4">
              <p class="mb-2"><strong>$9 Monthly Plan includes:</strong></p>
              <ul class="list-disc pl-5 space-y-1">
                <li>Analysis of up to 2,000 reviews from the last 6 months of historic data</li>
                <li>If your establishment has more than 2,000 reviews in the last 6 months, we will analyze the most recent 2,000 reviews</li>
                <li>For analysis of additional reviews beyond this limit, please contact our support team</li>
              </ul>
            </div>

            <h4 class="text-base font-semibold text-gray-900 mb-3">3. Daily Review Processing Limits</h4>
            <p class="text-sm text-gray-700 mb-4">
              Our service processes a maximum of 60 new reviews per day. If your establishment receives more than 60 reviews on any given day, only the most recent 60 reviews will be analyzed and included in your dashboard for that day.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">4. Data Sources and Privacy</h4>
            <div class="text-sm text-gray-700 mb-4">
              <p class="mb-2">Tablr operates within the following guidelines:</p>
              <ul class="list-disc pl-5 space-y-1">
                <li>We only analyze publicly available review data</li>
                <li>We do not store or access any private customer information</li>
                <li>All data processing complies with applicable privacy laws and platform terms of service</li>
                <li>We respect robots.txt files and rate limiting policies of source platforms</li>
              </ul>
            </div>

            <h4 class="text-base font-semibold text-gray-900 mb-3">5. Pricing and Payment Terms</h4>
            <div class="text-sm text-gray-700 mb-4">
              <p class="mb-2">Important pricing information:</p>
              <ul class="list-disc pl-5 space-y-1">
                <li>Tablr reserves the right to modify pricing structure in the future</li>
                <li>Existing subscribers will receive 30 days advance notice of any pricing changes</li>
                <li>Changes to pricing will not affect your current billing cycle</li>
                <li>You may cancel your subscription at any time before the next billing cycle</li>
              </ul>
            </div>

            <h4 class="text-base font-semibold text-gray-900 mb-3">6. Service Availability</h4>
            <p class="text-sm text-gray-700 mb-4">
              While we strive to maintain 99.9% uptime, Tablr does not guarantee uninterrupted service availability. We reserve the right to perform maintenance and updates that may temporarily affect service availability.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">7. Data Accuracy and Liability</h4>
            <p class="text-sm text-gray-700 mb-4">
              Tablr provides analysis based on publicly available data and AI-powered sentiment analysis. While we strive for accuracy, we cannot guarantee 100% precision in sentiment classification or data completeness. Users should use insights as guidance alongside their own business judgment.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">8. Acceptable Use</h4>
            <div class="text-sm text-gray-700 mb-4">
              <p class="mb-2">Users agree not to:</p>
              <ul class="list-disc pl-5 space-y-1">
                <li>Attempt to reverse engineer or circumvent our service</li>
                <li>Use the service for any illegal or unauthorized purpose</li>
                <li>Share account credentials with unauthorized parties</li>
                <li>Attempt to access data beyond your subscription limits</li>
              </ul>
            </div>

            <h4 class="text-base font-semibold text-gray-900 mb-3">9. Cancellation and Refunds</h4>
            <p class="text-sm text-gray-700 mb-4">
              You may cancel your subscription at any time. Cancellations will take effect at the end of your current billing period. We do not provide prorated refunds for partial months, except as required by law.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">10. Support and Contact</h4>
            <p class="text-sm text-gray-700 mb-4">
              For questions about these terms, billing issues, or requests for additional data analysis beyond plan limits, please contact our support team through the in-app support feature or by email.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">11. Changes to Terms</h4>
            <p class="text-sm text-gray-700 mb-4">
              Tablr may update these terms and conditions periodically. Users will be notified of significant changes via email or through the application interface. Continued use of the service after changes constitutes acceptance of updated terms.
            </p>

            <h4 class="text-base font-semibold text-gray-900 mb-3">12. Governing Law</h4>
            <p class="text-sm text-gray-700 mb-4">
              These terms and conditions are governed by the laws of the jurisdiction where Tablr operates. Any disputes will be resolved through binding arbitration in accordance with applicable arbitration rules.
            </p>

            <p class="text-sm text-gray-600 mt-6 pt-4 border-t border-gray-200">
              By clicking "I Accept" below and proceeding with registration, you acknowledge that you have read, understood, and agree to be bound by these terms and conditions.
            </p>
          </div>
        </div>

        <!-- Footer -->
        <div class="bg-gray-50 px-6 py-4 flex flex-col-reverse gap-3 sm:flex-row sm:justify-end sm:gap-3">
          <button type="button" onclick="closeTermsModal()" class="inline-flex w-full justify-center items-center rounded-md bg-white px-4 py-2.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:w-auto min-h-[40px]">
            Cancel
          </button>
          <button type="button" id="accept-terms-btn" onclick="acceptTermsAndClose()" class="inline-flex w-full justify-center items-center rounded-md bg-indigo-600 px-4 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto min-h-[40px]">
            I Accept
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
